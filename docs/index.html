<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Model Scores Visualization</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body style="font-family: sans-serif; text-align: center;">
  <h1>Model Scores Visualization</h1>
  <div id="chartContainer" style="width: 800px; margin: auto;"></div>

  <script>
    const resultFilePath = 'data/models-ranking-results.json';

    fetch(resultFilePath)
      .then(response => response.json())
      .then(data => {
        const models = Object.keys(data);

        // Dynamically get all score types from the first model
        const scoreTypes = Object.keys(data[models[0]].scores);

        // Prepare datasets for Chart.js
        const datasets = scoreTypes.map((scoreType, index) => {
          const values = models.map(model => data[model].scores[scoreType]);
          const color = `hsl(${index * 60 % 360}, 70%, 50%)`; // generate distinct colors
          return {
            label: scoreType,
            data: values,
            backgroundColor: color
          };
        });

        const canvas = document.createElement('canvas');
        canvas.width = 800;
        canvas.height = 400;
        document.getElementById('chartContainer').appendChild(canvas);

        new Chart(canvas, {
          type: 'bar',
          data: {
            labels: models,
            datasets: datasets
          },
          options: {
            responsive: true,
            scales: {
              y: { beginAtZero: true },
              x: { stacked: false }
            }
          }
        });
      })
      .catch(err => console.error("Error loading JSON:", err));
  </script>
</body>
</html>
